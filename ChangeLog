2005-05-19  Bas Wijnen  <shevek@fmf.nl>

	* z80asm.c (struct reference, printerr, compute_ref, new_reference,
	assemble): Added stack frame to reference.
	* z80asm.c (labelfilename, parse_commandline): Remove output files
	when compilation fails.
	* z80asm.c (use_force, parse_commandline, assemble, main): Implement
	--force.
	* z80asm.c (parse_commandline): Make a.bin the default target.
	* z80asm.c (check_label, rd_label, rd_value, rd_expr,
	get_include_name, assemble): Give errors about junk at end of
	line or expression.
	* z80asm.c (rd_value): Support double quotes for character constants.
	* z80asm.c (rd_expr_equal): Support = for equality.
	* z80asm.1: Updated manpage.

2005-05-18  Bas Wijnen  <shevek@fmf.nl>

	* z80asm.c (enum mnemonic, enum reftype, struct reference, struct
	label, struct stack, struct macro_arg, struct macro_line, struct
	macro, mnemonics, firstmacro, define_macro, sp, stack, readlabel,
	rd_expr, compute_ref, check_label, rd_label, rd_value, rd_factor,
	rd_term, rd_expr_shift, rd_expr_unequal, rd_expr_equal, rd_expr_and,
	rd_expr_xor, rd_expr_or, new_reference, wrt_ref, read_line,
	get_macro_args, assemble): Added macro support.
	* z80asm.c (rd_value): Added several radix notations.
	* examples/macro.asm: New file.

2005-05-17  Bas Wijnen  <shevek@fmf.nl>

	* Makefile (clean): Clean examples and headers.
	* Makefile (dist): Make versioned tarballs.
	* z80asm.c (buffer, try_use_real_file, flush_to_real_file,
	parse_commandline, assemble): Generalise writing to non-seekable
	files.
	* z80asm.c (reallistfile, parse_commandline, assemble): Use it for
	list file.
	* z80asm.c (read_line, assemble): Remove arbitrary line length limit.

2005-05-13  Bas Wijnen  <shevek@fmf.nl>

	* examples/Makefile, examples/hello.asm, headers/msx-bios.asm,
	headers/msx2-bios.asm, headers/msx2+-bios.asm,
	headers/msxturbor-bios.asm: New files.
	* z80asm.c (struct includedir, firstincludedir, open_include_file,
	add_include, parse_commandline, assemble, main): Use include path.
	* z80asm (parse_commandline): Make stderr default for list and label
	files.
	* z80asm.c (enum mnemonic, mnemonics, get_include_name, assemble): Add
	bininclude directive.
	* z80asm.c (printerr, assemble): Make error output parsable.
	* z80asm.1: Updated.

2005-05-11  Bas Wijnen  <shevek@fmf.nl>

	* Makefile (top level, dist): Use versions instead of dates.
	* VERSION: New file.
	* BUGS, NEWS, README: Removed.

2005-05-10  Bas Wijnen  <shevek@fmf.nl>

	* z80asm.1: New file.
	* z80asm.c (enum mnemonic, mnemonic, assemble): Support END directive.
	* z80asm.c (compare, indx, readlabel): Use strncasecmp instead of
	compare.
	* z80asm.c (assemble): Fix bug with strings in DEFB.
	* z80asm.c (assemble): Allow backslash-escapes in DEFB strings.
	* z80asm.c (rd_character): Allow octal escapes in strings.

2005-03-11  Bas Wijnen  <shevek@fmf.nl>

	* z80asm.c (rd_r): Fixed index prefix.
	* z80asm.c (assemble): Fixed register count errors.

2004-10-01  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm (rd_comma): Fixed possible buffer overflow.
	* z80asm (parse_commandline): Improved --help output.
	* z80asm (new_reference): Removed useless ++.
	* z80asm (wrt_ref, assemble): Improved list output for ds.

2004-10-01  H. Peter Anvin  <hpa@users.sourceforge.net>

	* z80asm.c (enum mnemonic, mnemonics, assemble): Added dm/defm as an
	alias for db/defb.
	* README: Updated documentation accordingly.
	* z80asm.c (write_one_byte, wrtb, new_reference, wrt_ref, assemble):
	Fixed bug regarding addr increments.

2004-09-29  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c: added global variable labelprefix.
	* z80asm.c (parse_commandline, assemble): Support prefixing labels.
	* z80asm.c (assemble): fixed bug in label output.

2004-09-29  H. Peter Anvin  <hpa@users.sourceforge.net>

	* Makefile: Fixed "make clean", removed -Werror for cygwin.
	* z80asm.c (rd_out): implemented out (c),0.

2004-09-28  H. Peter Anvin  <hpa@users.sourceforge.net>

	* z80asm.c (rd_number): Added ouput parameter endptr.  Changed all
	callers.
	* z80asm.c (rd_value): Added support for Zilog-style base
	specification.
	* README: Updated documentation.

2004-09-22  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c (assemble): Bugfixes to make ld (nn),a and ld sp,nn work.

2003-11-19  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c: Changed expression handling, bugfixes.
	
2003-10-30  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c: Added binary output as hex to listfile.

2003-10-30  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c: Added support for quoted strings in defb, added comments,
	added long option support and help/version information.
	* README: Updated documentation.

2002-05-15  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* z80asm.c (rd_expr): Added equations in expr and bugfix
	(assemble): Added if/else/endif

2002-04-28  Bas Wijnen  <b.wijnen@phys.rug.nl>

	* assembler.c: Started changelog
